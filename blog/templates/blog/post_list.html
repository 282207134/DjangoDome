{% extends 'base.html' %}

{% block title %}{{ title }} - Django 6.0 å­¦ä¹ é¡¹ç›®{% endblock %}

{% block content %}
<div style="max-width: 1200px; margin: 0 auto;">
    <div style="display: flex; gap: 2rem; margin-bottom: 2rem;">
        <div style="flex: 1;">
            <h1 style="color: #0c4b33; margin-bottom: 1.5rem;">ğŸ“ æ–‡ç« åˆ—è¡¨</h1>
            
            {% if posts %}
                {% for post in posts %}
                <div style="background: #fff; padding: 1.5rem; margin-bottom: 1.5rem; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border-left: 4px solid #0c4b33;">
                    <h2 style="margin: 0 0 0.5rem 0;">
                        <a href="{{ post.get_absolute_url }}" style="color: #0c4b33; text-decoration: none;">
                            {{ post.title }}
                        </a>
                    </h2>
                    
                    <div style="color: #666; font-size: 0.9rem; margin-bottom: 1rem; display: flex; gap: 1rem; flex-wrap: wrap;">
                        <span>ğŸ‘¤ ä½œè€…: <strong>{{ post.author.username }}</strong></span>
                        <span>ğŸ“… å‘å¸ƒäº: {{ post.publish|date:"Y-m-d H:i" }}</span>
                        <span>ğŸ‘ï¸ æµè§ˆ: {{ post.views }} æ¬¡</span>
                        {% if post.category %}
                            <span>
                                ğŸ“ åˆ†ç±»: 
                                <a href="{% url 'blog:category_detail' post.category.slug %}" style="color: #0c4b33;">
                                    {{ post.category.name }}
                                </a>
                            </span>
                        {% endif %}
                    </div>
                    
                    {% if post.excerpt %}
                        <p style="color: #333; line-height: 1.6; margin-bottom: 1rem;">
                            {{ post.excerpt|truncatewords:50 }}
                        </p>
                    {% endif %}
                    
                    {% if post.tags.all %}
                        <div style="margin-top: 1rem;">
                            {% for tag in post.tags.all %}
                                <a href="{% url 'blog:tag_detail' tag.slug %}" 
                                   style="display: inline-block; background: #e7f3ff; color: #0c4b33; padding: 0.25rem 0.75rem; border-radius: 15px; text-decoration: none; font-size: 0.85rem; margin-right: 0.5rem; margin-bottom: 0.5rem;">
                                    #{{ tag.name }}
                                </a>
                            {% endfor %}
                        </div>
                    {% endif %}
                    
                    <div style="margin-top: 1rem;">
                        <a href="{{ post.get_absolute_url }}" 
                           style="display: inline-block; background: #0c4b33; color: #fff; padding: 0.5rem 1.5rem; border-radius: 5px; text-decoration: none; font-weight: bold;">
                            é˜…è¯»å…¨æ–‡ â†’
                        </a>
                    </div>
                </div>
                {% endfor %}
                
                <!-- åˆ†é¡µ -->
                {% if is_paginated %}
                <div style="display: flex; justify-content: center; gap: 0.5rem; margin: 2rem 0; flex-wrap: wrap;">
                    {% if page_obj.has_previous %}
                        <a href="?page=1" 
                           style="padding: 0.5rem 1rem; background: #0c4b33; color: #fff; text-decoration: none; border-radius: 5px;">
                            é¦–é¡µ
                        </a>
                        <a href="?page={{ page_obj.previous_page_number }}" 
                           style="padding: 0.5rem 1rem; background: #0c4b33; color: #fff; text-decoration: none; border-radius: 5px;">
                            ä¸Šä¸€é¡µ
                        </a>
                    {% endif %}
                    
                    <span style="padding: 0.5rem 1rem; background: #f8f9fa; border-radius: 5px; display: flex; align-items: center;">
                        ç¬¬ {{ page_obj.number }} é¡µï¼Œå…± {{ page_obj.paginator.num_pages }} é¡µ
                    </span>
                    
                    {% if page_obj.has_next %}
                        <a href="?page={{ page_obj.next_page_number }}" 
                           style="padding: 0.5rem 1rem; background: #0c4b33; color: #fff; text-decoration: none; border-radius: 5px;">
                            ä¸‹ä¸€é¡µ
                        </a>
                        <a href="?page={{ page_obj.paginator.num_pages }}" 
                           style="padding: 0.5rem 1rem; background: #0c4b33; color: #fff; text-decoration: none; border-radius: 5px;">
                            æœ«é¡µ
                        </a>
                    {% endif %}
                </div>
                {% endif %}
            {% else %}
                <div style="background: #fff3cd; border: 1px solid #ffc107; padding: 2rem; border-radius: 10px; text-align: center;">
                    <p style="font-size: 1.2rem; color: #856404; margin: 0;">
                        ğŸ“­ è¿˜æ²¡æœ‰æ–‡ç« ï¼Œè¯·å…ˆåˆ°ç®¡ç†åå°åˆ›å»ºä¸€äº›æ–‡ç« å§ï¼
                    </p>
                    {% if user.is_authenticated %}
                        <a href="{% url 'blog:post_create' %}" 
                           style="display: inline-block; margin-top: 1rem; padding: 0.75rem 2rem; background: #0c4b33; color: #fff; text-decoration: none; border-radius: 5px; font-weight: bold;">
                            åˆ›å»ºç¬¬ä¸€ç¯‡æ–‡ç« 
                        </a>
                    {% endif %}
                </div>
            {% endif %}
        </div>
        
        <!-- ä¾§è¾¹æ  -->
        <div style="width: 300px; flex-shrink: 0;">
            <div style="background: #fff; padding: 1.5rem; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 1.5rem;">
                <h3 style="color: #0c4b33; margin-bottom: 1rem; border-bottom: 2px solid #0c4b33; padding-bottom: 0.5rem;">ğŸ“ åˆ†ç±»</h3>
                {% if categories %}
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        {% for category in categories %}
                        <li style="margin-bottom: 0.5rem;">
                            <a href="{% url 'blog:category_detail' category.slug %}" 
                               style="color: #333; text-decoration: none; display: flex; justify-content: space-between;">
                                <span>{{ category.name }}</span>
                                <span style="color: #666; font-size: 0.9rem;">({{ category.post_count }})</span>
                            </a>
                        </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p style="color: #666; font-size: 0.9rem;">æš‚æ— åˆ†ç±»</p>
                {% endif %}
            </div>
            
            <div style="background: #fff; padding: 1.5rem; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <h3 style="color: #0c4b33; margin-bottom: 1rem; border-bottom: 2px solid #0c4b33; padding-bottom: 0.5rem;">ğŸ·ï¸ æ ‡ç­¾</h3>
                {% if tags %}
                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                        {% for tag in tags %}
                        <a href="{% url 'blog:tag_detail' tag.slug %}" 
                           style="display: inline-block; background: #e7f3ff; color: #0c4b33; padding: 0.25rem 0.75rem; border-radius: 15px; text-decoration: none; font-size: 0.85rem;">
                            #{{ tag.name }} ({{ tag.post_count }})
                        </a>
                        {% endfor %}
                    </div>
                {% else %}
                    <p style="color: #666; font-size: 0.9rem;">æš‚æ— æ ‡ç­¾</p>
                {% endif %}
            </div>
            
            {% if user.is_authenticated %}
            <div style="background: #0c4b33; padding: 1.5rem; border-radius: 10px; margin-top: 1.5rem; text-align: center;">
                <a href="{% url 'blog:post_create' %}" 
                   style="display: inline-block; background: #fff; color: #0c4b33; padding: 0.75rem 2rem; border-radius: 5px; text-decoration: none; font-weight: bold;">
                    âœï¸ å†™æ–‡ç« 
                </a>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

